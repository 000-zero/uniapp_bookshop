(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-cart-preview"],{2311:function(e,t,r){var n=r("39db");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var s=r("4f06").default;s("bb44b0b6",n,!0,{sourceMap:!1,shadowMode:!1})},"37b9":function(e,t,r){"use strict";var n=r("2311"),s=r.n(n);s.a},"39db":function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.qrcode[data-v-c21d71d6]{padding:%?20?%}.empty[data-v-c21d71d6]{position:absolute;width:100%;top:0}.top[data-v-c21d71d6]{position:fixed;display:flex;width:100%;top:44px;margin-top:5px;margin-bottom:5px;height:%?100?%;z-index:99;background-color:#fff;border-bottom:2px solid #eee;z-index:1}.top .left[data-v-c21d71d6]{display:flex;margin-left:%?20?%}.top .left .address[data-v-c21d71d6]{font-weight:700;font-size:%?29?%}.top .left .info a[data-v-c21d71d6]{margin-right:%?20?%;color:#82848a}.top .right[data-v-c21d71d6]{display:flex;flex:1;text-align:right;margin-right:%?20?%;line-height:44px}.payKeyboard[data-v-c21d71d6]{z-index:9}.container[data-v-c21d71d6]{padding-top:25px;padding-left:17px;height:calc(100vh - var(--window-top) - 105px);overflow-y:scroll;margin-top:50px}.footer[data-v-c21d71d6]{position:fixed;display:flex;height:50px;bottom:0;background-color:#fff;border-top:2px solid #eee;line-height:%?100?%;width:100%}.footer .tp[data-v-c21d71d6]{display:flex;flex:1;align-items:center}.footer .price[data-v-c21d71d6]{width:100px;line-height:%?120?%;overflow:hidden;color:#2979ff;font-weight:700;font-size:%?40?%;margin-left:%?10?%}',""]),e.exports=t},"6d1c":function(e,t,r){"use strict";var n=r("4ea4");r("4de4"),r("13d5"),r("acd8"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r("96cf");var s=n(r("1da1")),a=r("d13b"),i=n(r("9d75")),d={data:function(){return{address:{},location:"",name:"",phone:"",shoplist:[],show:!1,address_id:"",timer:"",password:"",orders_id:""}},components:{payKeyboard:i.default},onLoad:function(){this.cartPreview()},computed:{totalPrice:function(){return this.shoplist.reduce((function(e,t){return parseFloat(e)+parseFloat(t.goods.price)*t.num}),0)}},methods:{cartPreview:function(){var e=this;return(0,s.default)(regeneratorRuntime.mark((function t(){var r,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,a.preview)();case 2:if(r=t.sent,console.log(r),e.shoplist=r.cart,n=e.$route.query.params,void 0==n){t.next=17;break}return t.next=9,(0,a.addressInfo)(n);case 9:s=t.sent,console.log(s),e.location=s.address.province+"-"+s.address.city+"-"+s.address.county+"-"+s.address.address,e.name=s.address.name,e.phone=s.address.phone,e.address_id=s.address.id,t.next=22;break;case 17:e.address=r.address.filter((function(e){return!!e.is_default})),e.location=e.address[0].province+"-"+e.address[0].city+"-"+e.address[0].county+"-"+e.address[0].address,e.name=e.address[0].name,e.phone=e.address[0].phone,e.address_id=e.address[0].id;case 22:case"end":return t.stop()}}),t)})))()},toAddress:function(){uni.$u.vuex("address_preview","true"),uni.navigateTo({url:"/pages/center/address/address"})},cancel:function(){var e=this;clearInterval(this.timer),this.$u.toast("已取消,请在订单有效期内支付"),this.show=!1,setTimeout((function(){e.$u.route({url:"pages/center/orders/myOrders"})}),1500)},submit:function(){var e=this;return(0,s.default)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={address_id:e.address_id,totalPrice:e.totalPrice},t.next=3,(0,a.orders)(r);case 3:n=t.sent,e.orders_id=n.order.id,e.show=!0;case 6:case"end":return t.stop()}}),t)})))()},close:function(){var e=this;this.$u.toast("已取消,请在订单有效期内支付"),this.show=!1,setTimeout((function(){e.$u.route({type:"redirectTo",url:"pages/center/orders/myOrders"})}),1500)},enterSuccess:function(e){var t=this;return(0,s.default)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n={password:e,orders_id:t.orders_id},r.next=3,(0,a.pay)(n);case 3:r.sent,t.show=!1,t.password=e,setTimeout((function(){t.$u.route({type:"redirectTo",url:"pages/center/orders/myOrders"})}),1500);case 7:case"end":return r.stop()}}),r)})))()}}};t.default=d},"9d6f":function(e,t,r){"use strict";r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){return n}));var n={uIcon:r("d112").default,shopList:r("40e3").default,uButton:r("501b").default,uEmpty:r("f401").default},s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-uni-view",[r("v-uni-view",{staticClass:"u-p-t-10"},[r("v-uni-view",{staticClass:"top",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toAddress.apply(void 0,arguments)}}},[r("v-uni-view",{staticClass:"left u-flex-9"},[r("v-uni-view",{staticClass:"address"},[r("v-uni-text",[e._v(e._s(e.location))])],1),r("v-uni-view",{staticClass:"info"},[r("v-uni-text",[r("a",[e._v(e._s(e.name))]),r("a",[e._v(e._s(e.phone))])])],1)],1),r("v-uni-view",{staticClass:"right u-flex-1"},[r("u-icon",{attrs:{name:"arrow-right"}})],1)],1),r("v-uni-view",{staticClass:"container"},e._l(e.shoplist,(function(e,t){return r("v-uni-view",{key:t},[r("shopList",{attrs:{item:e}})],1)})),1),r("v-uni-view",{staticClass:"footer"},[r("v-uni-view",{staticClass:"tp"},[r("v-uni-view",{staticStyle:{width:"100%","padding-left":"60rpx"}},[r("v-uni-text",{staticClass:"title"},[e._v("合计:")]),r("v-uni-text",{staticClass:"price"},[e._v("￥"+e._s(e.totalPrice))])],1),r("u-button",{ref:"submit",staticStyle:{padding:"0 100rpx","line-height":"50px",margin:"0","margin-right":"40rpx"},attrs:{disabled:!(e.totalPrice>0),type:"primary",ripple:!0,shape:"square"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submit.apply(void 0,arguments)}}},[e._v("提交订单并支付")])],1)],1)],1),r("v-uni-view",[e.show?r("payKeyboard",{staticClass:"payKeyboard",attrs:{title:"Mi安全键盘"},on:{success:function(t){arguments[0]=t=e.$handleEvent(t),e.enterSuccess.apply(void 0,arguments)},close:function(t){arguments[0]=t=e.$handleEvent(t),e.close.apply(void 0,arguments)}}}):e._e()],1),r("u-empty",{staticClass:"empty",attrs:{"icon-size":"100px",show:!(e.totalPrice>0),mode:"order"}})],1)},a=[]},a750:function(e,t,r){"use strict";r.r(t);var n=r("9d6f"),s=r("d0fe");for(var a in s)"default"!==a&&function(e){r.d(t,e,(function(){return s[e]}))}(a);r("37b9");var i,d=r("f0c5"),o=Object(d["a"])(s["default"],n["b"],n["c"],!1,null,"c21d71d6",null,!1,n["a"],i);t["default"]=o.exports},d0fe:function(e,t,r){"use strict";r.r(t);var n=r("6d1c"),s=r.n(n);for(var a in n)"default"!==a&&function(e){r.d(t,e,(function(){return n[e]}))}(a);t["default"]=s.a}}]);